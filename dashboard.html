<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KXON ‚Äî Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800;900&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/dashboard-layout.css">
    <link rel="stylesheet" href="css/dashboard-panels.css">
    <link rel="stylesheet" href="css/dashboard-player.css">
    <link rel="stylesheet" href="css/dashboard-modals.css">
    <link rel="stylesheet" href="css/dashboard-marketplace.css">
    <link rel="stylesheet" href="css/dashboard-videos.css">
    <link rel="stylesheet" href="css/dashboard-perfil.css">
    <link rel="stylesheet" href="css/dashboard-responsive.css">
    <link rel="stylesheet" href="css/dashboard-favs-share.css">
    <link rel="stylesheet" href="css/dashboard-analytics.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta name="theme-color" content="#0a0a0a">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="KXON">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <style>
    /* ============================================
       üé∂ PLAYLISTS - ESTILOS
       ============================================ */
    .pl-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px}
    .pl-card{background:var(--negro-card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radio-md);overflow:hidden;transition:var(--trans-suave);animation:fadeInUp .5s ease both;cursor:pointer}
    .pl-card:hover{border-color:rgba(192,192,192,.12);box-shadow:0 0 20px rgba(192,192,192,.06);transform:translateY(-4px)}
    .pl-card-new{border:2px dashed rgba(255,255,255,.08);background:transparent;display:flex;align-items:center;justify-content:center;min-height:200px}
    .pl-card-new:hover{border-color:rgba(192,192,192,.25);background:rgba(192,192,192,.03)}
    .pl-card-new-inner{display:flex;flex-direction:column;align-items:center;gap:12px}
    .pl-card-new-icon{font-size:2rem;color:var(--plata-oscura);width:50px;height:50px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:50%;display:flex;align-items:center;justify-content:center;transition:var(--trans-normal)}
    .pl-card-new:hover .pl-card-new-icon{color:var(--plata-blanca);background:rgba(192,192,192,.1);border-color:rgba(192,192,192,.3)}
    .pl-card-new-text{font-family:var(--font-titulo);font-size:.75rem;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--plata-oscura);transition:color .3s ease}
    .pl-card-new:hover .pl-card-new-text{color:var(--plata-clara)}
    .pl-card-cover{width:100%;aspect-ratio:1;overflow:hidden;position:relative}
    .pl-card-cover img{width:100%;height:100%;object-fit:cover;transition:var(--trans-lenta)}
    .pl-card:hover .pl-card-cover img{transform:scale(1.05)}
    .pl-card-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(5,5,5,.5);display:flex;align-items:center;justify-content:center;opacity:0;transition:var(--trans-normal)}
    .pl-card:hover .pl-card-overlay{opacity:1}
    .pl-card-overlay-icon{width:46px;height:46px;background:rgba(5,5,5,.7);border:1px solid rgba(192,192,192,.3);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.1rem;color:var(--plata-blanca);backdrop-filter:blur(10px)}
    .pl-card-del{position:absolute;top:10px;right:10px;width:28px;height:28px;background:rgba(255,71,87,.8);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.7rem;color:#fff;z-index:5;transition:var(--trans-normal);backdrop-filter:blur(5px);cursor:pointer;border:none;opacity:0}
    .pl-card:hover .pl-card-del{opacity:1}
    .pl-card-del:hover{background:var(--acento-error);transform:scale(1.1)}
    .pl-card-body{padding:16px}
    .pl-card-title{font-family:var(--font-titulo);font-size:.95rem;font-weight:700;color:var(--plata-titulo);margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .pl-card-meta{font-size:.72rem;color:var(--plata-oscura);font-weight:500}

    /* ‚îÄ‚îÄ Detalle Playlist ‚îÄ‚îÄ */
    .pl-detail{display:none;animation:fadeIn .4s ease}.pl-detail.show{display:block}
    .pl-detail-header{display:flex;gap:24px;margin-bottom:24px;align-items:flex-start}
    .pl-detail-cover{width:180px;height:180px;border-radius:var(--radio-md);overflow:hidden;flex-shrink:0;border:1px solid rgba(255,255,255,.08)}
    .pl-detail-cover img{width:100%;height:100%;object-fit:cover}
    .pl-detail-info{flex:1}
    .pl-detail-label{font-size:.62rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--plata-oscura);margin-bottom:8px;font-family:var(--font-titulo)}
    .pl-detail-title{font-family:var(--font-titulo);font-size:1.6rem;font-weight:800;color:var(--plata-blanca);margin-bottom:6px}
    .pl-detail-desc{font-size:.85rem;color:var(--plata-media);font-weight:300;margin-bottom:12px;line-height:1.5}
    .pl-detail-meta{font-size:.72rem;color:var(--plata-oscura);font-weight:500;letter-spacing:1px;text-transform:uppercase;margin-bottom:16px}
    .pl-detail-actions{display:flex;gap:10px;flex-wrap:wrap}
    .pl-detail-btn{padding:10px 20px;border-radius:var(--radio-sm);font-family:var(--font-titulo);font-size:.72rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;cursor:pointer;transition:var(--trans-suave);display:flex;align-items:center;gap:8px;border:none}
    .pl-btn-play{background:linear-gradient(135deg,#2a2a2a,#1a1a1a);color:var(--plata-blanca);border:1px solid rgba(192,192,192,.2)}
    .pl-btn-play:hover{background:linear-gradient(135deg,#c0c0c0,#888);color:var(--negro-base);border-color:var(--acento-principal);transform:translateY(-1px)}
    .pl-btn-shuffle{background:rgba(255,255,255,.04);color:var(--plata-clara);border:1px solid rgba(255,255,255,.08)}
    .pl-btn-shuffle:hover{background:rgba(255,255,255,.08);border-color:rgba(192,192,192,.2)}
    .pl-btn-edit{background:rgba(255,255,255,.04);color:var(--plata-clara);border:1px solid rgba(255,255,255,.08)}
    .pl-btn-edit:hover{background:rgba(255,255,255,.08);border-color:rgba(192,192,192,.2)}

    /* ‚îÄ‚îÄ Modal agregar a playlist ‚îÄ‚îÄ */
    .atp-item{display:flex;align-items:center;gap:12px;padding:12px 16px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:var(--radio-sm);margin-bottom:6px;transition:var(--trans-normal);cursor:pointer}
    .atp-item:hover{background:rgba(255,255,255,.05);border-color:rgba(192,192,192,.12)}
    .atp-item.atp-added{opacity:.5;cursor:default}
    .atp-item.atp-added:hover{background:rgba(255,255,255,.02);border-color:rgba(255,255,255,.04)}
    .atp-icon{font-size:1.1rem;flex-shrink:0}
    .atp-name{flex:1;font-size:.88rem;font-weight:600;color:var(--plata-titulo)}
    .atp-badge{font-size:.62rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:3px 10px;border-radius:50px;background:rgba(46,213,115,.1);color:var(--acento-exito);border:1px solid rgba(46,213,115,.2);flex-shrink:0}

    /* ‚îÄ‚îÄ Responsive Playlists ‚îÄ‚îÄ */
    @media(max-width:768px){.pl-grid{grid-template-columns:repeat(2,1fr);gap:12px}.pl-detail-header{flex-direction:column;align-items:center;text-align:center}.pl-detail-cover{width:160px;height:160px}.pl-detail-actions{justify-content:center}}
    @media(max-width:480px){.pl-grid{grid-template-columns:repeat(2,1fr);gap:10px}.pl-card-body{padding:12px}.pl-card-title{font-size:.82rem}}

    /* ============================================
       üí¨ COMENTARIOS - ESTILOS
       ============================================ */
    .cmt-section{margin-top:24px;padding-top:20px;border-top:1px solid rgba(255,255,255,.06)}
    .cmt-header{display:flex;align-items:center;gap:10px;margin-bottom:16px}
    .cmt-title{font-family:var(--font-titulo);font-size:.88rem;font-weight:700;color:var(--plata-titulo)}
    .cmt-count{padding:2px 10px;background:rgba(192,192,192,.08);border:1px solid rgba(192,192,192,.12);border-radius:50px;font-family:var(--font-titulo);font-size:.65rem;font-weight:700;color:var(--plata-media)}
    .cmt-input-wrap{display:flex;gap:12px;margin-bottom:20px;align-items:flex-start}
    .cmt-input-avatar{width:36px;height:36px;border-radius:50%;background:var(--negro-hover);border:1px solid rgba(192,192,192,.1);display:flex;align-items:center;justify-content:center;font-size:.75rem;color:var(--plata-media);overflow:hidden;flex-shrink:0}
    .cmt-input-box{flex:1}
    .cmt-textarea{width:100%;padding:12px 14px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:var(--radio-sm);color:var(--plata-blanca);font-family:var(--font-cuerpo);font-size:.85rem;resize:vertical;min-height:56px;max-height:150px;transition:var(--trans-suave);outline:none}
    .cmt-textarea::placeholder{color:var(--plata-oscura);font-weight:300}
    .cmt-textarea:focus{border-color:rgba(192,192,192,.3);background:rgba(255,255,255,.05);box-shadow:0 0 0 3px rgba(192,192,192,.05)}
    .cmt-input-actions{display:flex;align-items:center;justify-content:space-between;margin-top:8px}
    .cmt-chars{font-size:.68rem;color:var(--plata-oscura);font-weight:500;font-family:var(--font-titulo)}
    .cmt-send-btn{padding:8px 18px;background:linear-gradient(135deg,#2a2a2a,#1a1a1a);border:1px solid rgba(192,192,192,.2);border-radius:6px;color:var(--plata-blanca);font-family:var(--font-titulo);font-size:.7rem;font-weight:700;letter-spacing:1px;text-transform:uppercase;cursor:pointer;transition:var(--trans-suave)}
    .cmt-send-btn:hover{background:linear-gradient(135deg,#c0c0c0,#888);color:var(--negro-base);border-color:var(--acento-principal);transform:translateY(-1px)}
    .cmt-list{display:flex;flex-direction:column;gap:4px;max-height:350px;overflow-y:auto}
    .cmt-loading,.cmt-empty{text-align:center;padding:24px;font-size:.82rem;color:var(--plata-oscura);font-weight:300}
    .cmt-item{display:flex;gap:12px;padding:14px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:var(--radio-sm);transition:var(--trans-normal);animation:fadeIn .3s ease}
    .cmt-item:hover{border-color:rgba(192,192,192,.08);background:rgba(255,255,255,.03)}
    .cmt-avatar{width:34px;height:34px;border-radius:50%;background:var(--negro-hover);border:1px solid rgba(192,192,192,.1);display:flex;align-items:center;justify-content:center;font-size:.72rem;color:var(--plata-media);overflow:hidden;flex-shrink:0}
    .cmt-avatar img{width:100%;height:100%;object-fit:cover}
    .cmt-content{flex:1;min-width:0}
    .cmt-item-header{display:flex;align-items:center;gap:10px;margin-bottom:4px}
    .cmt-author{font-family:var(--font-titulo);font-size:.78rem;font-weight:700;color:var(--plata-titulo)}
    .cmt-time{font-size:.65rem;color:var(--plata-oscura)}
    .cmt-del-btn{margin-left:auto;background:none;border:none;font-size:.72rem;cursor:pointer;opacity:0;transition:var(--trans-normal);padding:2px 6px;border-radius:4px}
    .cmt-item:hover .cmt-del-btn{opacity:.5}
    .cmt-del-btn:hover{opacity:1!important;background:rgba(255,71,87,.1)}
    .cmt-text{font-size:.85rem;color:var(--plata-clara);font-weight:300;line-height:1.6;word-break:break-word}
    @media(max-width:480px){.cmt-input-wrap{flex-direction:column}.cmt-input-avatar{display:none}.cmt-avatar{width:28px;height:28px}}

    /* ============================================
       üìä PANEL HISTORIAL - ESTILOS
       ============================================ */
    .historial-header-actions {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 24px;
    }
    .historial-clear-btn {
        padding: 8px 18px;
        background: rgba(255,71,87,0.08);
        border: 1px solid rgba(255,71,87,0.2);
        border-radius: var(--radio-sm);
        color: var(--acento-error);
        font-family: var(--font-titulo);
        font-weight: 600;
        font-size: 0.7rem;
        letter-spacing: 1px;
        text-transform: uppercase;
        cursor: pointer;
        transition: var(--trans-suave);
    }
    .historial-clear-btn:hover {
        background: rgba(255,71,87,0.15);
        border-color: rgba(255,71,87,0.35);
        transform: translateY(-1px);
    }
    .historial-date-group {
        margin-bottom: 24px;
    }
    .historial-date-label {
        font-family: var(--font-titulo);
        font-size: 0.72rem;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: var(--plata-oscura);
        margin-bottom: 10px;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(255,255,255,0.04);
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .historial-date-label::before {
        content: 'üìÖ';
        font-size: 0.85rem;
    }
    .historial-track-item {
        display: flex;
        align-items: center;
        gap: 14px;
        padding: 12px 16px;
        background: var(--negro-card);
        border: 1px solid rgba(255,255,255,0.04);
        border-radius: var(--radio-sm);
        transition: var(--trans-suave);
        cursor: pointer;
        margin-bottom: 3px;
    }
    .historial-track-item:hover {
        background: rgba(255,255,255,0.03);
        border-color: rgba(192,192,192,0.1);
    }
    .historial-track-cover {
        width: 42px;
        height: 42px;
        border-radius: 6px;
        overflow: hidden;
        flex-shrink: 0;
        border: 1px solid rgba(255,255,255,0.06);
    }
    .historial-track-cover img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
    .historial-track-info {
        flex: 1;
        min-width: 0;
    }
    .historial-track-title {
        font-size: 0.88rem;
        font-weight: 600;
        color: var(--plata-titulo);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .historial-track-meta {
        font-size: 0.7rem;
        color: var(--plata-oscura);
        margin-top: 2px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .historial-track-time {
        font-size: 0.68rem;
        color: var(--plata-oscura);
        font-weight: 500;
        flex-shrink: 0;
        font-family: var(--font-titulo);
        letter-spacing: 0.5px;
    }

    /* ‚îÄ‚îÄ CONTADOR REPRODUCCIONES VISIBLE ‚îÄ‚îÄ */
    .track-plays {
        font-size: 0.65rem;
        color: var(--plata-oscura);
        font-weight: 600;
        font-family: var(--font-titulo);
        letter-spacing: 0.5px;
        display: flex;
        align-items: center;
        gap: 4px;
        flex-shrink: 0;
        min-width: 55px;
        justify-content: flex-end;
    }
    .track-plays .plays-fire {
        font-size: 0.7rem;
    }
    .track-plays.popular {
        color: var(--acento-dorado);
    }
    .radio-queue-plays {
        font-size: 0.62rem;
        color: var(--plata-oscura);
        font-weight: 500;
        margin-top: 2px;
        display: flex;
        align-items: center;
        gap: 3px;
    }

    /* ‚îÄ‚îÄ HISTORIAL STATS ‚îÄ‚îÄ */
    .historial-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 12px;
        margin-bottom: 28px;
    }
    .historial-stat {
        background: var(--negro-card);
        border: 1px solid rgba(255,255,255,0.06);
        border-radius: var(--radio-md);
        padding: 18px;
        text-align: center;
        transition: var(--trans-suave);
    }
    .historial-stat:hover {
        border-color: rgba(192,192,192,0.1);
    }
    .historial-stat-value {
        font-family: var(--font-titulo);
        font-size: 1.4rem;
        font-weight: 800;
        color: var(--plata-blanca);
        margin-bottom: 4px;
    }
    .historial-stat-label {
        font-size: 0.65rem;
        font-weight: 600;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        color: var(--plata-oscura);
    }

    /* ‚îÄ‚îÄ RESPONSIVE HISTORIAL ‚îÄ‚îÄ */
    @media (max-width: 768px) {
        .historial-stats {
            grid-template-columns: repeat(2, 1fr);
        }
        .historial-header-actions {
            flex-direction: column;
            align-items: flex-start;
        }
    }
    @media (max-width: 480px) {
        .historial-stats {
            grid-template-columns: 1fr;
        }
    }

    /* ============================================
       üîí SISTEMA DE LANZAMIENTO PROGRAMADO
       ============================================ */
    .card.album-locked {
        position: relative;
        cursor: default;
    }
    .card.album-locked .card-img::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.65);
        backdrop-filter: blur(4px);
        z-index: 2;
    }
    .card.album-locked .card-overlay {
        display: none;
    }
    .album-lock-badge {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 5;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        text-align: center;
        pointer-events: none;
    }
    .album-lock-icon {
        font-size: 2.2rem;
        filter: drop-shadow(0 0 10px rgba(0,0,0,.5));
        animation: lockPulse 2s ease-in-out infinite;
    }
    .album-lock-date {
        font-family: var(--font-titulo);
        font-size: .65rem;
        font-weight: 700;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        color: var(--plata-blanca);
        background: rgba(0, 0, 0, 0.7);
        padding: 5px 14px;
        border-radius: 50px;
        border: 1px solid rgba(192, 192, 192, 0.2);
        backdrop-filter: blur(10px);
        white-space: nowrap;
    }
    .album-lock-countdown {
        font-family: var(--font-titulo);
        font-size: .58rem;
        font-weight: 600;
        letter-spacing: 1px;
        color: var(--acento-dorado);
        background: rgba(255, 215, 0, 0.08);
        padding: 3px 10px;
        border-radius: 50px;
        border: 1px solid rgba(255, 215, 0, 0.15);
    }

    .track-item.track-locked {
        opacity: 0.45;
        cursor: not-allowed;
        pointer-events: none;
        position: relative;
    }
    .track-item.track-locked .track-play-btn {
        display: none;
    }
    .track-lock-info {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-left: auto;
        flex-shrink: 0;
    }
    .track-lock-icon {
        font-size: 1rem;
    }
    .track-lock-date {
        font-family: var(--font-titulo);
        font-size: .6rem;
        font-weight: 700;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: var(--plata-oscura);
        background: rgba(255, 255, 255, 0.04);
        padding: 3px 10px;
        border-radius: 50px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        white-space: nowrap;
    }

    .track-item.track-just-released {
        border-left: 3px solid var(--acento-exito);
        background: rgba(46, 213, 115, 0.03);
    }
    .track-new-badge {
        font-family: var(--font-titulo);
        font-size: .55rem;
        font-weight: 800;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        color: var(--acento-exito);
        background: rgba(46, 213, 115, 0.1);
        padding: 2px 8px;
        border-radius: 50px;
        border: 1px solid rgba(46, 213, 115, 0.2);
        animation: newPulse 2s ease-in-out infinite;
        flex-shrink: 0;
    }

    .album-release-info {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        margin-top: 10px;
        padding: 6px 16px;
        background: rgba(255, 215, 0, 0.06);
        border: 1px solid rgba(255, 215, 0, 0.12);
        border-radius: 50px;
        font-family: var(--font-titulo);
        font-size: .68rem;
        font-weight: 700;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: var(--acento-dorado);
    }
    .album-release-info.released {
        background: rgba(46, 213, 115, 0.06);
        border-color: rgba(46, 213, 115, 0.15);
        color: var(--acento-exito);
    }

    @keyframes lockPulse {
        0%, 100% { transform: scale(1); opacity: 0.9; }
        50% { transform: scale(1.1); opacity: 1; }
    }
    @keyframes newPulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.6; }
    }

    .track-item.track-locked.admin-override {
        opacity: 0.7;
        cursor: pointer;
        pointer-events: all;
    }
    .track-item.track-locked.admin-override:hover {
        opacity: 0.85;
    }
    .admin-lock-label {
        font-family: var(--font-titulo);
        font-size: .55rem;
        font-weight: 700;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: var(--acento-dorado);
        background: rgba(255, 215, 0, 0.08);
        padding: 2px 8px;
        border-radius: 50px;
        border: 1px solid rgba(255, 215, 0, 0.15);
        flex-shrink: 0;
    }

    /* ============================================
       üßπ SISTEMA LIMPIAR/MARCAR COMO VISTO
       ============================================ */
    .inicio-section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 14px;
        flex-wrap: wrap;
        gap: 8px;
    }
    .inicio-section-title-row {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    .inicio-new-badge {
        font-family: var(--font-titulo);
        font-size: .58rem;
        font-weight: 700;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: var(--acento-exito);
        background: rgba(46,213,115,.08);
        border: 1px solid rgba(46,213,115,.15);
        padding: 3px 10px;
        border-radius: 50px;
        animation: newPulse 2s ease-in-out infinite;
    }
    .inicio-clear-btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 14px;
        background: rgba(255,255,255,.03);
        border: 1px solid rgba(255,255,255,.06);
        border-radius: 8px;
        color: var(--plata-oscura);
        font-family: var(--font-titulo);
        font-size: .62rem;
        font-weight: 600;
        letter-spacing: 1px;
        text-transform: uppercase;
        cursor: pointer;
        transition: all .25s ease;
    }
    .inicio-clear-btn:hover {
        background: rgba(192,192,192,.06);
        border-color: rgba(192,192,192,.12);
        color: var(--plata-blanca);
        transform: translateY(-1px);
    }
    .inicio-all-seen {
        font-family: var(--font-titulo);
        font-size: .6rem;
        font-weight: 600;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: rgba(192,192,192,.25);
        padding: 6px 14px;
        background: rgba(255,255,255,.015);
        border: 1px solid rgba(255,255,255,.03);
        border-radius: 8px;
    }
    .inicio-clear-all-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 22px;
        background: linear-gradient(135deg, rgba(30,30,30,.9), rgba(18,18,18,.9));
        border: 1px solid rgba(192,192,192,.12);
        border-radius: 10px;
        color: var(--plata-blanca);
        font-family: var(--font-titulo);
        font-size: .7rem;
        font-weight: 700;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        cursor: pointer;
        transition: all .3s ease;
        width: 100%;
        justify-content: center;
    }
    .inicio-clear-all-btn:hover {
        background: linear-gradient(135deg, rgba(192,192,192,.15), rgba(192,192,192,.05));
        border-color: rgba(192,192,192,.2);
        transform: translateY(-1px);
        box-shadow: 0 4px 15px rgba(0,0,0,.2);
    }
    .inicio-all-clear {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        padding: 16px 24px;
        background: rgba(46,213,115,.03);
        border: 1px solid rgba(46,213,115,.08);
        border-radius: 12px;
        text-align: center;
    }
    .inicio-all-clear-icon {
        font-size: 1.2rem;
    }
    .inicio-all-clear-text {
        font-family: var(--font-titulo);
        font-size: .72rem;
        font-weight: 600;
        letter-spacing: .5px;
        color: rgba(46,213,115,.6);
    }
    .empty-state-sm {
        padding: 30px 16px;
    }
    .empty-state-sm .empty-icon {
        font-size: 1.5rem;
        margin-bottom: 8px;
    }
    .empty-state-sm .empty-title {
        font-size: .82rem;
    }
    .empty-state-sm .empty-text {
        font-size: .72rem;
        margin-top: 4px;
    }

    /* ============================================
       üî¥ EN VIVO - ESTILOS COMPLETOS
       ============================================ */
    .nav-live-dot {
        width: 8px;
        height: 8px;
        background: #ff4757;
        border-radius: 50%;
        margin-left: auto;
        animation: livePulse 1.5s ease-in-out infinite;
        box-shadow: 0 0 8px rgba(255, 71, 87, 0.6);
    }
    @keyframes livePulse {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(1.3); }
    }
    .live-banner {
        position: relative;
        background: linear-gradient(135deg, rgba(255,71,87,0.08), rgba(255,71,87,0.02));
        border: 1px solid rgba(255,71,87,0.15);
        border-radius: var(--radio-md);
        padding: 28px 32px;
        margin-bottom: 24px;
        overflow: hidden;
    }
    .live-banner-pulse {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: radial-gradient(ellipse at center, rgba(255,71,87,0.05) 0%, transparent 70%);
        animation: bannerPulse 3s ease-in-out infinite;
        pointer-events: none;
    }
    @keyframes bannerPulse {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 1; }
    }
    .live-banner-content {
        position: relative;
        z-index: 2;
    }
    .live-badge-big {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 6px 16px;
        background: rgba(255,71,87,0.15);
        border: 1px solid rgba(255,71,87,0.3);
        border-radius: 50px;
        font-family: var(--font-titulo);
        font-size: .72rem;
        font-weight: 800;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: #ff4757;
        margin-bottom: 14px;
    }
    .live-dot-anim {
        width: 8px;
        height: 8px;
        background: #ff4757;
        border-radius: 50%;
        animation: livePulse 1s ease-in-out infinite;
    }
    .live-stream-title {
        font-family: var(--font-titulo);
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--plata-blanca);
        margin-bottom: 12px;
    }
    .live-meta-row {
        display: flex;
        align-items: center;
        gap: 20px;
        flex-wrap: wrap;
    }
    .live-viewers {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 5px 14px;
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 50px;
        font-family: var(--font-titulo);
        font-size: .72rem;
        font-weight: 600;
        color: var(--plata-clara);
    }
    .live-viewers-icon {
        font-size: .85rem;
    }
    .live-viewers-num {
        color: #ff4757;
        font-weight: 800;
    }
    .live-duration {
        font-family: var(--font-titulo);
        font-size: .68rem;
        font-weight: 600;
        letter-spacing: 1px;
        color: var(--plata-oscura);
    }
    .live-player-wrapper {
        margin-bottom: 24px;
    }
    .live-player-container {
        position: relative;
        width: 100%;
        padding-bottom: 56.25%;
        background: #000;
        border-radius: var(--radio-md);
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.06);
    }
    .live-player-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }
    .live-info-section {
        margin-bottom: 24px;
    }
    .live-description {
        font-size: .88rem;
        color: var(--plata-media);
        font-weight: 300;
        line-height: 1.7;
        padding: 18px;
        background: var(--negro-card);
        border: 1px solid rgba(255,255,255,0.04);
        border-radius: var(--radio-sm);
    }
    .live-chat-section {
        margin-bottom: 24px;
    }
    .live-chat-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
    }
    .live-chat-title {
        font-family: var(--font-titulo);
        font-size: .82rem;
        font-weight: 700;
        color: var(--plata-titulo);
    }
    .live-chat-toggle {
        padding: 5px 14px;
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 6px;
        color: var(--plata-oscura);
        font-family: var(--font-titulo);
        font-size: .65rem;
        font-weight: 600;
        letter-spacing: 1px;
        text-transform: uppercase;
        cursor: pointer;
        transition: var(--trans-suave);
    }
    .live-chat-toggle:hover {
        background: rgba(255,255,255,0.08);
        color: var(--plata-clara);
    }
    .live-chat-container {
        width: 100%;
        height: 400px;
        border-radius: var(--radio-md);
        overflow: hidden;
        border: 1px solid rgba(255,255,255,0.06);
        background: #000;
    }
    .live-offline-card {
        text-align: center;
        padding: 60px 30px;
        background: var(--negro-card);
        border: 1px solid rgba(255,255,255,0.04);
        border-radius: var(--radio-md);
    }
    .live-offline-icon {
        font-size: 3.5rem;
        margin-bottom: 20px;
        opacity: 0.4;
    }
    .live-offline-title {
        font-family: var(--font-titulo);
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--plata-titulo);
        margin-bottom: 10px;
    }
    .live-offline-desc {
        font-size: .85rem;
        color: var(--plata-oscura);
        font-weight: 300;
        line-height: 1.7;
        max-width: 500px;
        margin: 0 auto 24px;
    }
    .live-offline-last {
        font-family: var(--font-titulo);
        font-size: .68rem;
        font-weight: 600;
        letter-spacing: 1px;
        color: var(--plata-oscura);
        margin-top: 16px;
    }
    .live-admin-section {
        margin-top: 32px;
        padding-top: 24px;
        border-top: 1px solid rgba(255,255,255,0.06);
    }
    .live-admin-card {
        background: var(--negro-card);
        border: 1px solid rgba(255,255,255,0.06);
        border-radius: var(--radio-md);
        padding: 24px;
    }
    .live-admin-status {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
        padding: 12px 18px;
        background: rgba(255,255,255,0.02);
        border: 1px solid rgba(255,255,255,0.06);
        border-radius: var(--radio-sm);
        font-family: var(--font-titulo);
        font-size: .78rem;
        color: var(--plata-clara);
    }
    .live-admin-status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        flex-shrink: 0;
    }
    .live-admin-status-dot.offline {
        background: var(--plata-oscura);
    }
    .live-admin-status-dot.online {
        background: #ff4757;
        animation: livePulse 1s ease-in-out infinite;
        box-shadow: 0 0 8px rgba(255, 71, 87, 0.5);
    }
    .live-admin-form {
        display: flex;
        flex-direction: column;
        gap: 16px;
    }
    .live-admin-actions {
        display: flex;
        gap: 12px;
        margin-top: 8px;
    }
    .live-btn-start {
        flex: 1;
        padding: 14px 28px;
        background: linear-gradient(135deg, rgba(255,71,87,0.15), rgba(255,71,87,0.08));
        border: 1px solid rgba(255,71,87,0.3);
        border-radius: var(--radio-sm);
        color: #ff4757;
        font-family: var(--font-titulo);
        font-size: .78rem;
        font-weight: 700;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        cursor: pointer;
        transition: all .3s ease;
    }
    .live-btn-start:hover {
        background: linear-gradient(135deg, rgba(255,71,87,0.25), rgba(255,71,87,0.15));
        border-color: rgba(255,71,87,0.5);
        transform: translateY(-2px);
        box-shadow: 0 4px 20px rgba(255,71,87,0.2);
    }
    .live-btn-stop {
        flex: 1;
        padding: 14px 28px;
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: var(--radio-sm);
        color: var(--plata-clara);
        font-family: var(--font-titulo);
        font-size: .78rem;
        font-weight: 700;
        letter-spacing: 1.5px;
        text-transform: uppercase;
        cursor: pointer;
        transition: all .3s ease;
    }
    .live-btn-stop:hover {
        background: rgba(255,71,87,0.1);
        border-color: rgba(255,71,87,0.3);
        color: #ff4757;
    }
    .live-history-item {
        display: flex;
        align-items: center;
        gap: 14px;
        padding: 12px 16px;
        background: rgba(255,255,255,0.02);
        border: 1px solid rgba(255,255,255,0.04);
        border-radius: var(--radio-sm);
        margin-bottom: 6px;
        transition: var(--trans-normal);
    }
    .live-history-item:hover {
        background: rgba(255,255,255,0.04);
        border-color: rgba(192,192,192,0.08);
    }
    .live-history-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--plata-oscura);
        flex-shrink: 0;
    }
    .live-history-dot.was-live {
        background: rgba(255,71,87,0.4);
    }
    .live-history-info {
        flex: 1;
        min-width: 0;
    }
    .live-history-title {
        font-size: .82rem;
        font-weight: 600;
        color: var(--plata-titulo);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .live-history-meta {
        font-size: .65rem;
        color: var(--plata-oscura);
        margin-top: 2px;
    }
    .live-history-delete {
        background: none;
        border: none;
        font-size: .75rem;
        cursor: pointer;
        opacity: 0;
        transition: var(--trans-normal);
        padding: 4px 8px;
        border-radius: 4px;
        color: var(--plata-oscura);
    }
    .live-history-item:hover .live-history-delete {
        opacity: 0.5;
    }
    .live-history-delete:hover {
        opacity: 1 !important;
        background: rgba(255,71,87,0.1);
        color: #ff4757;
    }
    .notif-live {
        border-left: 3px solid #ff4757;
    }
    .notif-item-icon.icon-live {
        background: rgba(255,71,87,0.1);
        border-color: rgba(255,71,87,0.2);
    }
    @media (max-width: 768px) {
        .live-banner { padding: 20px; }
        .live-stream-title { font-size: 1.15rem; }
        .live-meta-row { flex-direction: column; align-items: flex-start; gap: 8px; }
        .live-chat-container { height: 300px; }
        .live-admin-actions { flex-direction: column; }
    }

    </style>
</head>
<body>

    <!-- ‚è≥ LOADING -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo"><span>KXON</span></div>
        <div class="loading-spinner"></div>
    </div>

    <div class="toast-container" id="toastContainer"></div>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üî≤ MODALES
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

    <!-- üî≤ MODAL: NUEVO √ÅLBUM -->
    <div class="modal-overlay" id="modalAlbum">
        <div class="modal">
            <div class="modal-header"><h3 class="modal-title">Nuevo √Ålbum</h3><button class="modal-close" id="modalAlbumClose">‚úï</button></div>
            <div class="modal-body">
                <form class="modal-form" id="formAlbum">
                    <div class="form-group"><label class="form-label">T√≠tulo del √°lbum</label><input type="text" class="form-input" id="albumTitulo" placeholder="Nombre del √°lbum" required></div>
                    <div class="form-group"><label class="form-label">Descripci√≥n</label><textarea class="form-textarea" id="albumDesc" placeholder="Descripci√≥n (opcional)"></textarea></div>
                    <div class="form-group">
                        <label class="form-label">üìÖ Fecha de Lanzamiento</label>
                        <input type="datetime-local" class="form-input" id="albumFechaLanzamiento">
                        <span style="font-size:.68rem;color:var(--plata-oscura);font-style:italic;margin-top:4px;display:block;">Si dejas vac√≠o, el √°lbum se publica inmediatamente. Si pones fecha, estar√° bloqueado hasta ese d√≠a.</span>
                    </div>
                    <div class="form-group"><label class="form-label">Portada</label><div class="file-upload"><div class="file-upload-area" id="albumCoverArea"><div class="file-upload-icon">üñºÔ∏è</div><div class="file-upload-text">Click para subir imagen</div><div class="file-upload-hint">JPG, PNG, WebP ‚Äî M√°x 5MB</div></div><input type="file" id="albumCoverFile" accept="image/jpeg,image/png,image/webp"></div><div class="img-preview" id="albumCoverPreview"><img id="albumCoverImg" src="" alt=""></div></div>
                    <div class="modal-actions"><button type="button" class="btn-modal-cancel" id="modalAlbumCancel">Cancelar</button><button type="submit" class="btn-modal-submit" id="btnAlbumSubmit">Crear √Ålbum</button></div>
                </form>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: NUEVA CANCI√ìN -->
    <div class="modal-overlay" id="modalCancion">
        <div class="modal">
            <div class="modal-header"><h3 class="modal-title">Agregar Canci√≥n al √Ålbum</h3><button class="modal-close" id="modalCancionClose">‚úï</button></div>
            <div class="modal-body">
                <form class="modal-form" id="formCancion">
                    <div class="form-group"><label class="form-label">T√≠tulo de la canci√≥n</label><input type="text" class="form-input" id="cancionTitulo" placeholder="Nombre de la canci√≥n" required></div>
                    <div class="form-group">
                        <label class="form-label">üìÖ Fecha de Lanzamiento</label>
                        <input type="datetime-local" class="form-input" id="cancionFechaLanzamiento">
                        <span style="font-size:.68rem;color:var(--plata-oscura);font-style:italic;margin-top:4px;display:block;">Si dejas vac√≠o, se publica con el √°lbum. Si pones fecha, estar√° üîí bloqueada hasta ese d√≠a.</span>
                    </div>
                    <div class="form-group"><label class="form-label">Archivo de audio</label><div class="file-upload"><div class="file-upload-area" id="cancionAudioArea"><div class="file-upload-icon">üéµ</div><div class="file-upload-text">Click para subir audio</div><div class="file-upload-hint">MP3, WAV, OGG ‚Äî M√°x 50MB</div></div><input type="file" id="cancionAudioFile" accept="audio/mpeg,audio/mp3,audio/wav,audio/ogg"></div><div class="upload-progress" id="uploadProgress"><div class="upload-bar"><div class="upload-bar-fill" id="uploadBarFill"></div></div><div class="upload-text" id="uploadText">Subiendo...</div></div></div>
                    <div class="modal-actions"><button type="button" class="btn-modal-cancel" id="modalCancionCancel">Cancelar</button><button type="submit" class="btn-modal-submit" id="btnCancionSubmit">Subir Canci√≥n</button></div>
                </form>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: NUEVA NOTICIA -->
    <div class="modal-overlay" id="modalNoticia">
        <div class="modal">
            <div class="modal-header"><h3 class="modal-title">Nueva Noticia</h3><button class="modal-close" id="modalNoticiaClose">‚úï</button></div>
            <div class="modal-body">
                <form class="modal-form" id="formNoticia">
                    <div class="form-group"><label class="form-label">T√≠tulo de la noticia</label><input type="text" class="form-input" id="noticiaTitulo" placeholder="T√≠tulo" required></div>
                    <div class="form-group"><label class="form-label">Descripci√≥n</label><textarea class="form-textarea" id="noticiaDesc" placeholder="Contenido de la noticia" required></textarea></div>
                    <div class="form-group"><label class="form-label">Imagen</label><div class="file-upload"><div class="file-upload-area" id="noticiaCoverArea"><div class="file-upload-icon">üñºÔ∏è</div><div class="file-upload-text">Click para subir imagen</div><div class="file-upload-hint">JPG, PNG, WebP ‚Äî M√°x 5MB</div></div><input type="file" id="noticiaCoverFile" accept="image/jpeg,image/png,image/webp"></div><div class="img-preview" id="noticiaCoverPreview"><img id="noticiaCoverImg" src="" alt=""></div></div>
                    <div class="modal-actions"><button type="button" class="btn-modal-cancel" id="modalNoticiaCancel">Cancelar</button><button type="submit" class="btn-modal-submit" id="btnNoticiaSubmit">Publicar</button></div>
                </form>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: DETALLE NOTICIA -->
    <div class="modal-overlay" id="modalNoticiaDetalle">
        <div class="modal" style="max-width:600px;">
            <div class="modal-header"><h3 class="modal-title" id="noticiaDetalleTitulo">Noticia</h3><button class="modal-close" onclick="document.getElementById('modalNoticiaDetalle').classList.remove('show')">‚úï</button></div>
            <div class="modal-body" style="padding-top:16px;">
                <div id="noticiaDetalleImgWrap" style="width:100%;border-radius:10px;overflow:hidden;margin-bottom:20px;border:1px solid rgba(255,255,255,.06);display:none;"><img id="noticiaDetalleImg" src="" alt="" style="width:100%;height:auto;max-height:350px;object-fit:cover;display:block;"></div>
                <div style="margin-bottom:16px;"><span id="noticiaDetalleFecha" style="font-size:.7rem;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--plata-oscura);font-family:var(--font-titulo);background:rgba(255,255,255,.04);padding:5px 12px;border-radius:50px;border:1px solid rgba(255,255,255,.06);"></span></div>
                <p id="noticiaDetalleDesc" style="font-size:.92rem;color:var(--plata-clara);font-weight:300;line-height:1.8;white-space:pre-wrap;"></p>
                <div id="noticiaDetalleComments"></div>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: NUEVO PRODUCTO MARKETPLACE -->
    <div class="modal-overlay" id="modalMarketAdd">
        <div class="modal" style="max-width:520px;">
            <div class="modal-header"><h3 class="modal-title" id="modalMarketTitle">Nuevo Producto</h3><button class="modal-close" onclick="window._closeMarketModal()">‚úï</button></div>
            <div class="modal-body">
                <form class="modal-form" id="formMarketAdd">
                    <div class="form-group"><label class="form-label">Tipo de producto</label><div class="market-tabs" style="margin-bottom:0;"><div class="market-tab active" id="addTypeBeat" onclick="window._setAddType('beat')">üéπ Beat</div><div class="market-tab" id="addTypeCancion" onclick="window._setAddType('cancion')">üé§ Canci√≥n</div></div></div>
                    <input type="hidden" id="marketAddTipo" value="beat">
                    <div class="form-group"><label class="form-label">T√≠tulo</label><input type="text" class="form-input" id="marketAddTitulo" placeholder="Nombre del beat o canci√≥n" required></div>
                    <div class="form-group"><label class="form-label">Descripci√≥n</label><textarea class="form-textarea" id="marketAddDesc" placeholder="Descripci√≥n (opcional)"></textarea></div>
                    <div class="form-group"><label class="form-label">Precio (COP $)</label><input type="number" class="form-input" id="marketAddPrecio" placeholder="50000" min="0" step="1000" required></div>
                    <div class="form-group"><label class="form-label">Portada</label><div class="file-upload"><div class="file-upload-area" id="marketImgArea"><div class="file-upload-icon">üñºÔ∏è</div><div class="file-upload-text">Click para subir imagen</div><div class="file-upload-hint">JPG, PNG, WebP ‚Äî M√°x 5MB</div></div><input type="file" id="marketImgFile" accept="image/jpeg,image/png,image/webp"></div><div class="img-preview" id="marketImgPreview"><img id="marketImgPrev" src="" alt=""></div></div>
                    <div class="form-group" id="groupAudioMain"><label class="form-label" id="labelAudioMain">Archivo de audio (Beat)</label><div class="file-upload"><div class="file-upload-area" id="marketAudioMainArea"><div class="file-upload-icon">üéµ</div><div class="file-upload-text">Click para subir audio</div><div class="file-upload-hint">MP3, WAV ‚Äî M√°x 50MB</div></div><input type="file" id="marketAudioMainFile" accept="audio/mpeg,audio/mp3,audio/wav,audio/ogg"></div></div>
                    <div class="form-group" id="groupAudioVoz" style="display:none;"><label class="form-label">Archivo de Voz (solo voz)</label><div class="file-upload"><div class="file-upload-area" id="marketAudioVozArea"><div class="file-upload-icon">üé§</div><div class="file-upload-text">Click para subir voz</div><div class="file-upload-hint">MP3, WAV ‚Äî M√°x 50MB</div></div><input type="file" id="marketAudioVozFile" accept="audio/mpeg,audio/mp3,audio/wav,audio/ogg"></div></div>
                    <div class="form-group" id="groupAudioBeat" style="display:none;"><label class="form-label">Archivo de Beat (solo beat)</label><div class="file-upload"><div class="file-upload-area" id="marketAudioBeatArea"><div class="file-upload-icon">üéπ</div><div class="file-upload-text">Click para subir beat separado</div><div class="file-upload-hint">MP3, WAV ‚Äî M√°x 50MB</div></div><input type="file" id="marketAudioBeatFile" accept="audio/mpeg,audio/mp3,audio/wav,audio/ogg"></div></div>
                    <div class="upload-progress" id="marketUploadProgress"><div class="upload-bar"><div class="upload-bar-fill" id="marketUploadFill"></div></div><div class="upload-text" id="marketUploadText">Subiendo...</div></div>
                    <div class="modal-actions"><button type="button" class="btn-modal-cancel" onclick="window._closeMarketModal()">Cancelar</button><button type="submit" class="btn-modal-submit" id="btnMarketSubmit">Publicar</button></div>
                </form>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: DETALLE PRODUCTO MARKETPLACE -->
    <div class="market-detail-overlay" id="marketDetailOverlay">
        <div class="market-detail-modal">
            <button class="market-detail-close" onclick="document.getElementById('marketDetailOverlay').classList.remove('show')">‚úï</button>
            <div class="market-detail-header"><div class="market-detail-cover"><img id="marketDetCover" src="" alt=""></div><div class="market-detail-info"><div class="market-detail-badge" id="marketDetBadge">BEAT</div><h2 class="market-detail-title" id="marketDetTitle"></h2><p class="market-detail-desc" id="marketDetDesc"></p><div><span class="market-detail-price-label">Precio</span><div class="market-detail-price" id="marketDetPrice"></div></div></div></div>
            <div class="market-detail-audios" id="marketDetAudios"></div>
            <div class="market-detail-actions" id="marketDetActions"><button class="market-detail-buy-btn" id="marketDetBuyBtn" onclick="window._initPurchase()">üõí Comprar Ahora</button></div>
        </div>
    </div>

    <!-- üî≤ MODAL: DETALLE SOLICITUD -->
    <div class="solicitud-detail-overlay" id="solicitudDetailOverlay">
        <div class="solicitud-detail-modal">
            <button class="solicitud-detail-close" onclick="document.getElementById('solicitudDetailOverlay').classList.remove('show')">‚úï</button>
            <div class="solicitud-detail-product"><div class="solicitud-detail-cover"><img id="solDetCover" src="" alt=""></div><div class="solicitud-detail-product-info"><div class="solicitud-detail-product-type market-badge-beat" id="solDetType">BEAT</div><div class="solicitud-detail-product-title" id="solDetTitle"></div><div class="solicitud-detail-product-price" id="solDetPrice"></div></div></div>
            <div class="solicitud-detail-info"><div class="solicitud-detail-info-grid"><div class="solicitud-detail-info-item"><div class="solicitud-detail-info-label">Comprador</div><div class="solicitud-detail-info-value" id="solDetBuyer"></div></div><div class="solicitud-detail-info-item"><div class="solicitud-detail-info-label">Email</div><div class="solicitud-detail-info-value" id="solDetEmail"></div></div><div class="solicitud-detail-info-item"><div class="solicitud-detail-info-label">Fecha</div><div class="solicitud-detail-info-value" id="solDetFecha"></div></div><div class="solicitud-detail-info-item"><div class="solicitud-detail-info-label">Estado</div><div class="solicitud-detail-info-value" id="solDetEstado">‚è≥ Pendiente</div></div></div></div>
            <div class="solicitud-detail-comprobante" id="solDetCompWrap"><div class="solicitud-detail-comprobante-title">üì∏ Comprobante de pago</div><img class="solicitud-detail-comprobante-img" id="solDetCompImg" src="" alt="Comprobante" onclick="window.open(this.src,'_blank')"></div>
            <div class="solicitud-detail-actions" id="solDetActions"><button class="btn-confirm-purchase" id="solDetBtnConfirm">‚úÖ Confirmar Compra</button><button class="btn-reject-purchase" id="solDetBtnReject">‚ùå Rechazar</button></div>
        </div>
    </div>

    <!-- üî≤ MODAL: FORMULARIO DE COMPRA -->
    <div class="purchase-form-overlay" id="purchaseOverlay">
        <div class="purchase-form-modal">
            <div class="purchase-header"><h3 class="purchase-title">üí≥ Confirmar Compra</h3><button class="purchase-close" onclick="window._closePurchase()">‚úï</button></div>
            <div class="purchase-body">
                <div class="purchase-info-card"><div class="purchase-info-row"><span class="purchase-info-label">Usuario</span><span class="purchase-info-value" id="purchaseUser"></span></div><div class="purchase-info-row"><span class="purchase-info-label">Producto</span><span class="purchase-info-value" id="purchaseProduct"></span></div><div class="purchase-info-row"><span class="purchase-info-label">Precio</span><span class="purchase-info-value price" id="purchasePrice"></span></div></div>
                <div class="nequi-box"><div class="nequi-label">Pagar con Nequi al n√∫mero</div><div class="nequi-number">318 453 0020</div><div class="nequi-hint">Realiza la transferencia y sube el comprobante</div></div>
                <a href="#" target="_blank" class="btn-whatsapp" id="btnWhatsapp">üí¨ Ir a WhatsApp para confirmar</a>
                <div class="form-group"><label class="form-label">Subir comprobante de pago</label><div class="file-upload"><div class="file-upload-area" id="purchaseCompArea"><div class="file-upload-icon">üì∏</div><div class="file-upload-text">Click para subir comprobante</div><div class="file-upload-hint">JPG, PNG ‚Äî M√°x 5MB</div></div><input type="file" id="purchaseCompFile" accept="image/jpeg,image/png,image/webp"></div><div class="img-preview" id="purchaseCompPreview"><img id="purchaseCompImg" src="" alt=""></div></div>
                <div class="purchase-actions"><button type="button" class="btn-modal-cancel" onclick="window._closePurchase()">Cancelar</button><button type="button" class="btn-send-purchase" id="btnSendPurchase" onclick="window._sendPurchase()">Enviar Solicitud</button></div>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: NUEVO VIDEO -->
    <div class="modal-overlay" id="modalVideo">
        <div class="modal" style="max-width:520px;">
            <div class="modal-header"><h3 class="modal-title">Nuevo Video</h3><button class="modal-close" id="modalVideoClose">‚úï</button></div>
            <div class="modal-body">
                <form class="modal-form" id="formVideo">
                    <div class="form-group"><label class="form-label">T√≠tulo del video</label><input type="text" class="form-input" id="videoTitulo" placeholder="Nombre del video" required></div>
                    <div class="form-group"><label class="form-label">Descripci√≥n</label><textarea class="form-textarea" id="videoDesc" placeholder="Descripci√≥n (opcional)"></textarea></div>
                    <div class="form-group"><label class="form-label">Miniatura / Thumbnail</label><div class="file-upload"><div class="file-upload-area" id="videoThumbArea"><div class="file-upload-icon">üñºÔ∏è</div><div class="file-upload-text">Click para subir imagen</div><div class="file-upload-hint">JPG, PNG, WebP ‚Äî M√°x 5MB</div></div><input type="file" id="videoThumbFile" accept="image/jpeg,image/png,image/webp"></div><div class="img-preview" id="videoThumbPreview"><img id="videoThumbImg" src="" alt=""></div></div>
                    <div class="form-group"><label class="form-label">Archivo de Video</label><div class="file-upload"><div class="file-upload-area" id="videoFileArea"><div class="file-upload-icon">üé¨</div><div class="file-upload-text">Click para subir video</div><div class="file-upload-hint">MP4, WebM, MOV ‚Äî M√°x 500MB</div></div><input type="file" id="videoFileInput" accept="video/mp4,video/webm,video/quicktime"></div></div>
                    <div class="upload-progress" id="videoUploadProgress"><div class="upload-bar"><div class="upload-bar-fill" id="videoUploadFill"></div></div><div class="upload-text" id="videoUploadText">Subiendo...</div></div>
                    <div class="modal-actions"><button type="button" class="btn-modal-cancel" id="modalVideoCancel">Cancelar</button><button type="submit" class="btn-modal-submit" id="btnVideoSubmit">Subir Video</button></div>
                </form>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: NUEVO DOCUMENTAL -->
    <div class="modal-overlay" id="modalDocumental">
        <div class="modal">
            <div class="modal-header"><h3 class="modal-title">Nuevo Documental</h3><button class="modal-close" id="modalDocumentalClose">‚úï</button></div>
            <div class="modal-body">
                <form class="modal-form" id="formDocumental">
                    <div class="form-group"><label class="form-label">T√≠tulo del documental</label><input type="text" class="form-input" id="docuTitulo" placeholder="Nombre del documental" required></div>
                    <div class="form-group"><label class="form-label">Descripci√≥n</label><textarea class="form-textarea" id="docuDesc" placeholder="Sinopsis o descripci√≥n"></textarea></div>
                    <div class="form-group"><label class="form-label">Portada</label><div class="file-upload"><div class="file-upload-area" id="docuCoverArea"><div class="file-upload-icon">üñºÔ∏è</div><div class="file-upload-text">Click para subir imagen</div><div class="file-upload-hint">JPG, PNG, WebP ‚Äî M√°x 5MB</div></div><input type="file" id="docuCoverFile" accept="image/jpeg,image/png,image/webp"></div><div class="img-preview" id="docuCoverPreview"><img id="docuCoverImg" src="" alt=""></div></div>
                    <div class="modal-actions"><button type="button" class="btn-modal-cancel" id="modalDocumentalCancel">Cancelar</button><button type="submit" class="btn-modal-submit" id="btnDocuSubmit">Crear Documental</button></div>
                </form>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: NUEVO EPISODIO -->
    <div class="modal-overlay" id="modalEpisodio">
        <div class="modal" style="max-width:520px;">
            <div class="modal-header"><h3 class="modal-title">Agregar Episodio</h3><button class="modal-close" id="modalEpisodioClose">‚úï</button></div>
            <div class="modal-body">
                <form class="modal-form" id="formEpisodio">
                    <div class="form-group"><label class="form-label">T√≠tulo del episodio</label><input type="text" class="form-input" id="episodioTitulo" placeholder="Ej: Episodio 1 ‚Äî El inicio" required></div>
                    <div class="form-group"><label class="form-label">Descripci√≥n</label><textarea class="form-textarea" id="episodioDesc" placeholder="Descripci√≥n del episodio (opcional)"></textarea></div>
                    <div class="form-group"><label class="form-label">N√∫mero de episodio</label><input type="number" class="form-input" id="episodioNumero" placeholder="1" min="1" value="1" required></div>
                    <div class="form-group"><label class="form-label">Miniatura del episodio</label><div class="file-upload"><div class="file-upload-area" id="episodioThumbArea"><div class="file-upload-icon">üñºÔ∏è</div><div class="file-upload-text">Click para subir imagen</div><div class="file-upload-hint">JPG, PNG, WebP ‚Äî M√°x 5MB</div></div><input type="file" id="episodioThumbFile" accept="image/jpeg,image/png,image/webp"></div><div class="img-preview" id="episodioThumbPreview"><img id="episodioThumbImg" src="" alt=""></div></div>
                    <div class="form-group"><label class="form-label">Archivo de Video</label><div class="file-upload"><div class="file-upload-area" id="episodioVideoArea"><div class="file-upload-icon">üé¨</div><div class="file-upload-text">Click para subir video</div><div class="file-upload-hint">MP4, WebM, MOV ‚Äî M√°x 500MB</div></div><input type="file" id="episodioVideoFile" accept="video/mp4,video/webm,video/quicktime"></div></div>
                    <div class="upload-progress" id="episodioUploadProgress"><div class="upload-bar"><div class="upload-bar-fill" id="episodioUploadFill"></div></div><div class="upload-text" id="episodioUploadText">Subiendo...</div></div>
                    <div class="modal-actions"><button type="button" class="btn-modal-cancel" id="modalEpisodioCancel">Cancelar</button><button type="submit" class="btn-modal-submit" id="btnEpisodioSubmit">Subir Episodio</button></div>
                </form>
            </div>
        </div>
    </div>

    <!-- üé¨ REPRODUCTOR DE VIDEO -->
    <div class="video-player-overlay" id="videoPlayerOverlay">
        <div class="video-player-header"><h3 class="video-player-title" id="videoPlayerTitle">Video</h3><div class="video-player-controls"><button class="video-player-btn fullscreen-btn" id="videoFullscreenBtn" title="Pantalla completa">‚õ∂</button><button class="video-player-btn close-btn" id="videoPlayerCloseBtn" title="Cerrar">‚úï</button></div></div>
        <div class="video-player-wrapper" id="videoPlayerWrapper"><video id="videoPlayerEl" controls preload="metadata"></video></div>
        <div class="video-player-info"><p class="video-player-desc" id="videoPlayerDesc"></p><div class="video-player-meta"><span class="video-player-meta-item" id="videoPlayerViews">üëÅ 0 vistas</span><span class="video-player-meta-item" id="videoPlayerDate">üìÖ ‚Äî</span></div></div>
    </div>

    <!-- üî≤ MODAL: SUSCRIPCI√ìN -->
    <div class="purchase-form-overlay" id="subOverlay">
        <div class="purchase-form-modal">
            <div class="purchase-header"><h3 class="purchase-title">üé´ Suscribirse al Plan</h3><button class="purchase-close" onclick="window._closeSubModal()">‚úï</button></div>
            <div class="purchase-body">
                <div class="purchase-info-card"><div class="purchase-info-row"><span class="purchase-info-label">Usuario</span><span class="purchase-info-value" id="subUser"></span></div><div class="purchase-info-row"><span class="purchase-info-label">Plan</span><span class="purchase-info-value" id="subPlanName"></span></div><div class="purchase-info-row"><span class="purchase-info-label">Precio</span><span class="purchase-info-value price" id="subPlanPrice"></span></div><div class="purchase-info-row"><span class="purchase-info-label">Duraci√≥n</span><span class="purchase-info-value" id="subPlanDuration">30 d√≠as</span></div></div>
                <div class="nequi-box"><div class="nequi-label">Pagar con Nequi al n√∫mero</div><div class="nequi-number">318 453 0020</div><div class="nequi-hint">Realiza la transferencia y sube el comprobante</div></div>
                <a href="#" target="_blank" class="btn-whatsapp" id="subBtnWhatsapp">üí¨ Ir a WhatsApp para confirmar</a>
                <div class="form-group"><label class="form-label">Subir comprobante de pago</label><div class="file-upload"><div class="file-upload-area" id="subCompArea"><div class="file-upload-icon">üì∏</div><div class="file-upload-text">Click para subir comprobante</div><div class="file-upload-hint">JPG, PNG ‚Äî M√°x 5MB</div></div><input type="file" id="subCompFile" accept="image/jpeg,image/png,image/webp"></div><div class="img-preview" id="subCompPreview"><img id="subCompImg" src="" alt=""></div></div>
                <div class="purchase-actions"><button type="button" class="btn-modal-cancel" onclick="window._closeSubModal()">Cancelar</button><button type="button" class="btn-send-purchase" id="btnSendSub" onclick="window._sendSubscription()">Enviar Solicitud</button></div>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: EDITAR PLAN -->
    <div class="modal-overlay" id="modalEditPlan">
        <div class="modal">
            <div class="modal-header"><h3 class="modal-title">Editar Plan</h3><button class="modal-close" onclick="window._closeEditPlan()">‚úï</button></div>
            <div class="modal-body">
                <form class="modal-form" id="formEditPlan">
                    <input type="hidden" id="editPlanId">
                    <div class="form-group"><label class="form-label">Nombre del plan</label><input type="text" class="form-input" id="editPlanNombre" required></div>
                    <div class="form-group"><label class="form-label">Precio (COP $)</label><input type="number" class="form-input" id="editPlanPrecio" min="0" step="1000" required></div>
                    <div class="form-group"><label class="form-label">Duraci√≥n (d√≠as)</label><input type="number" class="form-input" id="editPlanDuracion" min="1" value="30" required></div>
                    <div class="modal-actions"><button type="button" class="btn-modal-cancel" onclick="window._closeEditPlan()">Cancelar</button><button type="submit" class="btn-modal-submit" id="btnEditPlanSubmit">Guardar</button></div>
                </form>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: CREAR/EDITAR PLAYLIST -->
    <div class="modal-overlay" id="modalPlaylist">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="plModalTitle">Nueva Playlist</h3>
                <button class="modal-close" onclick="window._closePlaylistModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <form class="modal-form" onsubmit="window._submitPlaylist(event)">
                    <input type="hidden" id="plModalEditId" value="">
                    <div class="form-group">
                        <label class="form-label">Nombre</label>
                        <input type="text" class="form-input" id="plNombre" placeholder="Mi playlist favorita" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descripci√≥n (opcional)</label>
                        <textarea class="form-textarea" id="plDesc" placeholder="Describe tu playlist..." rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label style="display:flex;align-items:center;gap:10px;cursor:pointer;">
                            <input type="checkbox" id="plPublica" style="width:18px;height:18px;accent-color:var(--acento-principal);">
                            <span class="form-label" style="margin:0;">Playlist p√∫blica</span>
                        </label>
                        <span style="font-size:.68rem;color:var(--plata-oscura);font-style:italic;margin-top:4px;">Las playlists p√∫blicas pueden ser vistas por otros usuarios</span>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-modal-cancel" onclick="window._closePlaylistModal()">Cancelar</button>
                        <button type="submit" class="btn-modal-submit" id="plBtnSubmit"><span id="plBtnSubmitText">üé∂ Crear Playlist</span></button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- üî≤ MODAL: AGREGAR A PLAYLIST -->
    <div class="modal-overlay" id="modalAddToPlaylist">
        <div class="modal" style="max-width:420px;">
            <div class="modal-header">
                <h3 class="modal-title">Agregar a Playlist</h3>
                <button class="modal-close" onclick="window._closeAddToPlaylist()">‚úï</button>
            </div>
            <div class="modal-body">
                <p style="font-size:.82rem;color:var(--plata-media);margin-bottom:16px;">Selecciona una playlist:</p>
                <div id="addToPlList"></div>
            </div>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ DROPDOWN COMPARTIR ‚îÄ‚îÄ -->
    <div class="share-dropdown" id="shareDropdown">
        <div class="share-dropdown-title">Compartir en</div>
        <button class="share-option whatsapp" onclick="window._shareVia('whatsapp')"><span class="share-option-icon">üí¨</span><span class="share-option-label">WhatsApp</span></button>
        <button class="share-option twitter" onclick="window._shareVia('twitter')"><span class="share-option-icon">üê¶</span><span class="share-option-label">Twitter / X</span></button>
        <button class="share-option facebook" onclick="window._shareVia('facebook')"><span class="share-option-icon">üìò</span><span class="share-option-label">Facebook</span></button>
        <button class="share-option telegram" onclick="window._shareVia('telegram')"><span class="share-option-icon">‚úàÔ∏è</span><span class="share-option-label">Telegram</span></button>
        <button class="share-option copy" onclick="window._shareVia('copy')"><span class="share-option-icon">üìã</span><span class="share-option-label">Copiar enlace</span></button>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üìê APP LAYOUT
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="app-layout">

        <!-- ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header"><a href="index.html" class="sidebar-logo"><span class="sidebar-logo-text"><span>KXON</span></span><span class="sidebar-logo-dot"></span></a></div>
            <nav class="sidebar-nav">
                <div class="nav-section-label">Principal</div>
                <div class="nav-item active" data-panel="inicio"><span class="nav-icon">üè†</span><span class="nav-text">Inicio</span></div>
                <div class="nav-item" data-panel="albumes"><span class="nav-icon">üíø</span><span class="nav-text">√Ålbumes</span></div>
                <div class="nav-item" data-panel="canciones"><span class="nav-icon">üéµ</span><span class="nav-text">Canciones</span></div>
                <div class="nav-item" data-panel="radio"><span class="nav-icon">üìª</span><span class="nav-text">Radio</span></div>
                <div class="nav-item" data-panel="playlists"><span class="nav-icon">üé∂</span><span class="nav-text">Playlists</span></div>
                <div class="nav-section-label">Contenido</div>
                <div class="nav-item" data-panel="videos"><span class="nav-icon">üé¨</span><span class="nav-text">Videos</span></div>
                                <div class="nav-item" data-panel="envivo"><span class="nav-icon">üî¥</span><span class="nav-text">En Vivo</span><span class="nav-live-dot" id="navLiveDot" style="display:none;"></span></div>
                <div class="nav-item" data-panel="documentales"><span class="nav-icon">üéûÔ∏è</span><span class="nav-text">Documentales</span></div>
                <div class="nav-section-label">Tienda</div>
                <div class="nav-item" data-panel="marketplace"><span class="nav-icon">üõí</span><span class="nav-text">Marketplace</span></div>
                <div class="nav-item" data-panel="archivo"><span class="nav-icon">üìÅ</span><span class="nav-text">Archivo</span></div>
                <div class="nav-item" data-panel="planes"><span class="nav-icon">üé´</span><span class="nav-text">Planes</span></div>
                <div class="nav-item" data-panel="historial"><span class="nav-icon">üìä</span><span class="nav-text">Historial</span></div>
                <div class="nav-section-label">Cuenta</div>
                <div class="nav-item" data-panel="favoritos"><span class="nav-icon">‚ù§Ô∏è</span><span class="nav-text">Favoritos</span></div>
                <div class="nav-item" data-panel="perfil"><span class="nav-icon">üë§</span><span class="nav-text">Perfil</span></div>
                <div class="nav-item nav-admin-only" data-panel="analytics"><span class="nav-icon">üìä</span><span class="nav-text">Analytics</span></div>
            </nav>
            <div class="sidebar-footer"><div class="sidebar-user"><div class="sidebar-avatar" id="sidebarAvatar">üë§</div><div class="sidebar-user-info"><div class="sidebar-user-name" id="sidebarName">...</div><div class="sidebar-user-role" id="sidebarRole">...</div></div><button class="btn-logout-small" id="btnLogout" title="Cerrar sesi√≥n">üö™</button></div></div>
        </aside>

        <!-- ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ -->
        <main class="main-content">
            <header class="main-header">
                <div class="main-header-left">
                    <button class="btn-hamburger" id="btnHamburger">‚ò∞</button>
                    <h2 class="main-header-title" id="headerTitle">Inicio</h2>
                </div>
                <div class="search-wrapper" id="searchWrapper">
                    <input type="text" class="search-input" id="searchInput" placeholder="Buscar canciones, √°lbumes, beats..." autocomplete="off">
                    <span class="search-icon">üîç</span>
                    <button class="search-clear" id="searchClear">‚úï</button>
                    <div class="search-results" id="searchResults"></div>
                </div>
                <div class="main-header-actions">
                    <div class="notif-wrapper" id="notifWrapper">
                        <button class="notif-btn" id="notifBtn" title="Notificaciones">üîî<span class="notif-badge" id="notifBadge">0</span></button>
                        <div class="notif-dropdown" id="notifDropdown">
                            <div class="notif-header"><span class="notif-header-title">Notificaciones</span><div class="notif-header-actions"><button class="notif-mark-all" id="notifMarkAll">Marcar todas le√≠das</button></div></div>
                            <div class="notif-list" id="notifList"><div class="notif-empty"><div class="notif-empty-icon">üîî</div><div class="notif-empty-text">Sin notificaciones</div></div></div>
                        </div>
                    </div>
                    <button class="btn-admin-add" id="btnAdminAdd"><span class="plus-icon">+</span><span id="btnAdminText">Agregar</span></button>
                </div>
            </header>

            <div class="content-area">

                <!-- üè† PANEL: INICIO -->
                <div class="panel active" id="panel-inicio">
                    <div class="panel-header">
                        <h1 class="panel-title">Bienvenido a KXON</h1>
                        <p class="panel-desc">Tu resumen de la plataforma</p>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card"><div class="stat-icon">üíø</div><div class="stat-value" id="statAlbumes">0</div><div class="stat-label">√Ålbumes</div></div>
                        <div class="stat-card"><div class="stat-icon">üéµ</div><div class="stat-value" id="statCanciones">0</div><div class="stat-label">Canciones</div></div>
                        <div class="stat-card"><div class="stat-icon">üõí</div><div class="stat-value" id="statBeats">0</div><div class="stat-label">Beats</div></div>
                        <div class="stat-card"><div class="stat-icon">üì∞</div><div class="stat-value" id="statNoticias">0</div><div class="stat-label">Noticias</div></div>
                    </div>

                    <!-- Bot√≥n global limpiar -->
                    <div id="inicioClearAllWrap" style="display:none;margin-bottom:24px;"></div>

                    <!-- Secci√≥n Noticias -->
                    <div class="panel-section" id="inicioNoticiasWrap">
                        <div class="inicio-section-header"></div>
                        <div class="content-grid" id="inicioNoticias"></div>
                    </div>

                    <!-- Secci√≥n Canciones -->
                    <div class="panel-section" id="inicioCancionesWrap">
                        <div class="inicio-section-header"></div>
                        <div class="track-list" id="inicioCanciones"></div>
                    </div>

                    <!-- Secci√≥n √Ålbumes -->
                    <div class="panel-section" id="inicioAlbumesWrap">
                        <div class="inicio-section-header"></div>
                        <div class="content-grid content-grid-albums" id="inicioAlbumes"></div>
                    </div>
                </div>

                <!-- üíø PANEL: √ÅLBUMES -->
                <div class="panel" id="panel-albumes">
                    <div id="albumesListView">
                        <div class="panel-header">
                            <h1 class="panel-title">√Ålbumes</h1>
                            <p class="panel-desc">Discograf√≠a completa de KXON</p>
                        </div>
                        <div class="content-grid content-grid-albums" id="albumesGrid">
                            <div class="empty-state">
                                <div class="empty-icon">üíø</div>
                                <div class="empty-title">Cargando √°lbumes...</div>
                            </div>
                        </div>
                    </div>
                    <div class="album-detail" id="albumDetailView">
                        <button class="btn-back" id="btnBackAlbums">‚Üê Volver a √Ålbumes</button>
                        <div class="album-detail-header">
                            <div class="album-detail-cover">
                                <img id="albumDetailCover" src="" alt="">
                            </div>
                            <div class="album-detail-info">
                                <div class="album-detail-label">√ÅLBUM</div>
                                <h1 class="album-detail-title" id="albumDetailTitle"></h1>
                                <p class="album-detail-desc" id="albumDetailDesc"></p>
                                <span class="album-detail-meta" id="albumDetailMeta"></span>
                                <div id="albumReleaseInfoWrap"></div>
                            </div>
                        </div>
                        <div class="section-header-row">
                            <div class="panel-section-title">üéµ Canciones</div>
                            <button class="btn-add-track nav-admin-only" id="btnAddTrack">
                                <span>+</span> Agregar Canci√≥n
                            </button>
                        </div>
                        <div class="track-list" id="trackList">
                            <div class="empty-state">
                                <div class="empty-icon">üéµ</div>
                                <div class="empty-title">Sin canciones a√∫n</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- üìª PANEL: RADIO -->
                <div class="panel" id="panel-radio">
                    <div class="panel-header">
                        <h1 class="panel-title">Radio KXON</h1>
                        <p class="panel-desc">Reproducci√≥n continua de toda la m√∫sica</p>
                    </div>

                    <!-- Radio Player Principal -->
                    <div class="radio-player">
                        <div class="radio-player-main">
                            <div class="radio-disc-wrapper">
                                <div class="radio-disc" id="radioDisc">
                                    <img class="radio-disc-img" id="radioDiscImg" src="https://placehold.co/300x300/111/333?text=‚ô™" alt="">
                                    <div class="radio-disc-hole"></div>
                                </div>
                            </div>
                            <div class="radio-info">
                                <div class="radio-on-air" id="radioOnAir">
                                    <span class="radio-on-air-dot"></span>
                                    <span class="radio-on-air-text">ON AIR</span>
                                </div>
                                <div class="radio-track-title" id="radioTrackTitle">Selecciona una canci√≥n</div>
                                <div class="radio-track-album" id="radioTrackAlbum">KXON Radio</div>
                            </div>
                        </div>

                        <!-- Controles -->
                        <div class="radio-controls">
                            <button class="radio-ctrl-btn" id="radioShuffle" title="Aleatorio">üîÄ</button>
                            <button class="radio-ctrl-btn" id="radioPrev" title="Anterior">‚èÆ</button>
                            <button class="radio-ctrl-btn radio-play-btn" id="radioPlayBtn" title="Play/Pause">
                                <span id="radioPlayIcon">‚ñ∂</span>
                            </button>
                            <button class="radio-ctrl-btn" id="radioNext" title="Siguiente">‚è≠</button>
                        </div>

                        <!-- Barra de progreso -->
                        <div class="radio-progress-section">
                            <span class="radio-time" id="radioCurrentTime">0:00</span>
                            <div class="radio-progress-bar" id="radioProgressBar">
                                <div class="radio-progress-fill" id="radioProgressFill"></div>
                                <div class="radio-progress-glow" id="radioProgressGlow"></div>
                            </div>
                            <span class="radio-time" id="radioDuration">0:00</span>
                        </div>

                        <!-- Volumen -->
                        <div class="radio-volume-section">
                            <span class="radio-vol-icon" id="radioVolIcon">üîä</span>
                            <div class="radio-volume-bar" id="radioVolumeBar">
                                <div class="radio-volume-fill" id="radioVolumeFill" style="width:70%"></div>
                            </div>
                            <span class="radio-vol-pct" id="radioVolPct">70%</span>
                        </div>
                    </div>

                    <!-- Cola de reproducci√≥n -->
                    <div class="radio-queue-section">
                        <div class="radio-queue-header">
                            <div class="panel-section-title">üìã Cola de Reproducci√≥n</div>
                            <span class="radio-queue-count" id="radioQueueCount">0 canciones</span>
                        </div>
                        <div class="radio-queue-list" id="radioQueueList">
                            <div class="empty-state">
                                <div class="empty-icon">üéµ</div>
                                <div class="empty-title">Cargando radio...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- üéµ PANEL: CANCIONES -->
                <div class="panel" id="panel-canciones">
                    <div class="panel-header">
                        <h1 class="panel-title">Todas las Canciones</h1>
                        <p class="panel-desc">Biblioteca completa de m√∫sica KXON</p>
                    </div>
                    <div class="track-list" id="allCancionesList">
                        <div class="empty-state">
                            <div class="empty-icon">üéµ</div>
                            <div class="empty-title">Cargando canciones...</div>
                        </div>
                    </div>
                </div>

                <!-- üé∂ PANEL: PLAYLISTS -->
                <div class="panel" id="panel-playlists">
                    <div id="plListView">
                        <div class="panel-header">
                            <h1 class="panel-title">Mis Playlists</h1>
                            <p class="panel-desc">Tus listas de reproducci√≥n personalizadas</p>
                        </div>
                        <div class="pl-grid" id="playlistsGrid">
                            <div class="empty-state"><div class="empty-icon">üé∂</div><div class="empty-title">Cargando playlists...</div></div>
                        </div>
                    </div>
                    <div class="pl-detail" id="plDetailView">
                        <button class="btn-back" onclick="window._backToPlaylists()">‚Üê Volver a Playlists</button>
                        <div class="pl-detail-header">
                            <div class="pl-detail-cover"><img id="plDetailCover" src="" alt=""></div>
                            <div class="pl-detail-info">
                                <div class="pl-detail-label">Playlist</div>
                                <h1 class="pl-detail-title" id="plDetailTitle"></h1>
                                <p class="pl-detail-desc" id="plDetailDesc"></p>
                                <span class="pl-detail-meta" id="plDetailMeta">0 canciones</span>
                                <div class="pl-detail-actions">
                                    <button class="pl-detail-btn pl-btn-play" onclick="window._playAllPlaylist()">‚ñ∂ Reproducir</button>
                                    <button class="pl-detail-btn pl-btn-shuffle" onclick="window._shufflePlaylist()">üîÄ Aleatorio</button>
                                    <button class="pl-detail-btn pl-btn-edit" onclick="window._openEditPlaylist()">‚úèÔ∏è Editar</button>
                                </div>
                            </div>
                        </div>
                        <div class="panel-section-title">üéµ Canciones</div>
                        <div class="track-list" id="plTrackList">
                            <div class="empty-state"><div class="empty-icon">üéµ</div><div class="empty-title">Playlist vac√≠a</div></div>
                        </div>
                    </div>
                </div>

                <!-- üé¨ PANEL: VIDEOS -->
                <div class="panel" id="panel-videos"><div class="panel-header"><h1 class="panel-title">Videos</h1><p class="panel-desc">Contenido audiovisual exclusivo de KXON</p></div><div class="videos-grid" id="videosGrid"><div class="empty-state"><div class="empty-icon">üé¨</div><div class="empty-title">Cargando videos...</div></div></div></div>

                <!-- üî¥ PANEL: EN VIVO -->
                <div class="panel" id="panel-envivo">
                    <div class="panel-header">
                        <h1 class="panel-title">üî¥ En Vivo</h1>
                        <p class="panel-desc">Transmisiones en directo exclusivas de KXON</p>
                    </div>
                    <div id="liveActiveSection" style="display:none;">
                        <div class="live-banner">
                            <div class="live-banner-pulse"></div>
                            <div class="live-banner-content">
                                <div class="live-badge-big"><span class="live-dot-anim"></span>EN VIVO</div>
                                <h2 class="live-stream-title" id="liveStreamTitle">KXON en directo</h2>
                                <div class="live-meta-row">
                                    <span class="live-viewers" id="liveViewerCount"><span class="live-viewers-icon">üëÅ</span><span class="live-viewers-num" id="liveViewersNum">0</span><span>viendo ahora</span></span>
                                    <span class="live-duration" id="liveDuration">‚è± Iniciado hace 0 min</span>
                                </div>
                            </div>
                        </div>
                        <div class="live-player-wrapper">
                            <div class="live-player-container" id="livePlayerContainer">
                                <iframe id="liveIframe" src="" width="100%" height="100%" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                            </div>
                        </div>
                        <div class="live-info-section"><div class="live-description" id="liveDescription"></div></div>
                        <div class="live-chat-section" id="liveChatSection" style="display:none;">
                            <div class="live-chat-header"><span class="live-chat-title">üí¨ Chat en vivo</span><button class="live-chat-toggle" id="liveChatToggle" onclick="window._toggleLiveChat()">Ocultar</button></div>
                            <div class="live-chat-container" id="liveChatContainer"><iframe id="liveChatIframe" src="" width="100%" height="100%" frameborder="0"></iframe></div>
                        </div>
                    </div>
                    <div id="liveOfflineSection">
                        <div class="live-offline-card">
                            <div class="live-offline-icon">üì∫</div>
                            <h2 class="live-offline-title">No hay transmisi√≥n en vivo</h2>
                            <p class="live-offline-desc">Cuando KXON inicie una transmisi√≥n en directo, aparecer√° aqu√≠ autom√°ticamente. Te enviaremos una notificaci√≥n.</p>
                            <div class="live-offline-last" id="liveOfflineLast"></div>
                        </div>
                    </div>
                    <div class="live-admin-section nav-admin-only" id="liveAdminSection" style="display:none;">
                        <div class="panel-section-title">‚öôÔ∏è Control de Transmisi√≥n (Admin)</div>
                        <div class="live-admin-card">
                            <div class="live-admin-status" id="liveAdminStatus"><span class="live-admin-status-dot offline"></span><span>Estado: <strong id="liveAdminStatusText">Offline</strong></span></div>
                            <form class="live-admin-form" id="formLiveConfig">
                                <div class="form-group"><label class="form-label">ID del video de YouTube</label><input type="text" class="form-input" id="liveYoutubeId" placeholder="Ej: dQw4w9WgXcQ o URL completa"><span style="font-size:.68rem;color:var(--plata-oscura);font-style:italic;margin-top:4px;display:block;">Pega el ID o la URL completa del video de YouTube</span></div>
                                <div class="form-group"><label class="form-label">T√≠tulo del directo</label><input type="text" class="form-input" id="liveTitle" placeholder="Ej: KXON Session en vivo #12"></div>
                                <div class="form-group"><label class="form-label">Descripci√≥n (opcional)</label><textarea class="form-textarea" id="liveDesc" placeholder="Descripci√≥n del directo..." rows="3"></textarea></div>
                                <div class="form-group"><label style="display:flex;align-items:center;gap:10px;cursor:pointer;"><input type="checkbox" id="liveIncludeChat" style="width:18px;height:18px;accent-color:var(--acento-principal);"><span class="form-label" style="margin:0;">Incluir chat de YouTube</span></label></div>
                                <div class="live-admin-actions">
                                    <button type="button" class="live-btn-start" id="btnGoLive" onclick="window._goLive()">üî¥ Iniciar En Vivo</button>
                                    <button type="button" class="live-btn-stop" id="btnStopLive" onclick="window._stopLive()" style="display:none;">‚èπ Terminar Transmisi√≥n</button>
                                </div>
                            </form>
                            <div class="live-admin-history"><div class="panel-section-title" style="font-size:.72rem;margin-top:20px;">üìã √öltimas transmisiones</div><div id="liveHistory"></div></div>
                        </div>
                    </div>
                </div>

                <!-- üéûÔ∏è PANEL: DOCUMENTALES -->
                <div class="panel" id="panel-documentales">
                    <div id="docuListView"><div class="panel-header"><h1 class="panel-title">Documentales</h1><p class="panel-desc">Series documentales exclusivas ‚Äî Cada documental con sus episodios</p></div><div class="docu-grid" id="docuGrid"><div class="empty-state"><div class="empty-icon">üéûÔ∏è</div><div class="empty-title">Cargando documentales...</div></div></div></div>
                    <div class="docu-detail" id="docuDetailView"><button class="btn-back" id="btnBackDocu">‚Üê Volver a Documentales</button><div class="docu-detail-header"><div class="docu-detail-cover"><img id="docuDetailCover" src="" alt=""></div><div class="docu-detail-info"><h1 class="docu-detail-title" id="docuDetailTitle"></h1><p class="docu-detail-desc" id="docuDetailDesc"></p><span class="docu-detail-meta" id="docuDetailMeta"></span></div></div><div class="section-header-row"><div class="panel-section-title">üé¨ Episodios</div><button class="btn-add-track" id="btnAddEpisodio"><span>+</span> Agregar Episodio</button></div><div class="episodio-list" id="episodioList"><div class="empty-state"><div class="empty-icon">üé¨</div><div class="empty-title">Sin episodios</div></div></div></div>
                </div>

                <!-- üõí PANEL: MARKETPLACE -->
                <div class="panel" id="panel-marketplace">
                    <div class="panel-header"><h1 class="panel-title">Marketplace</h1><p class="panel-desc">Beats y canciones exclusivas para artistas</p></div>
                    <div class="market-tabs"><div class="market-tab active" data-market-tab="beat" onclick="window._marketTab('beat')">üéπ Beats</div><div class="market-tab" data-market-tab="cancion" onclick="window._marketTab('cancion')">üé§ Canciones</div></div>
                    <div class="market-grid" id="marketGrid"></div>
                    <div class="solicitudes-section" id="solicitudesSection" style="display:none;"><div class="panel-section-title">üìã Solicitudes de Compra</div><div id="solicitudesList"></div></div>
                </div>

                <!-- üìÅ PANEL: ARCHIVO -->
                <div class="panel" id="panel-archivo">
                    <div class="panel-header"><h1 class="panel-title">Mi Archivo</h1><p class="panel-desc">Tus beats y canciones compradas ‚Äî Descarga y escucha sin l√≠mites</p></div>
                    <div class="archivo-stats"><div class="archivo-stat-card"><div class="archivo-stat-icon">üéµ</div><div class="archivo-stat-value" id="archivoStatTotal">0</div><div class="archivo-stat-label">Total comprados</div></div><div class="archivo-stat-card"><div class="archivo-stat-icon">üéπ</div><div class="archivo-stat-value" id="archivoStatBeats">0</div><div class="archivo-stat-label">Beats</div></div><div class="archivo-stat-card"><div class="archivo-stat-icon">üé§</div><div class="archivo-stat-value" id="archivoStatCanciones">0</div><div class="archivo-stat-label">Canciones</div></div><div class="archivo-stat-card"><div class="archivo-stat-icon">üí∞</div><div class="archivo-stat-value" id="archivoStatInvertido">$0</div><div class="archivo-stat-label">Invertido</div></div></div>
                    <div class="archivo-tabs"><div class="archivo-tab active" data-archivo-tab="todos" onclick="window._archivoTab('todos')">üì¶ Todos</div><div class="archivo-tab" data-archivo-tab="beat" onclick="window._archivoTab('beat')">üéπ Beats</div><div class="archivo-tab" data-archivo-tab="cancion" onclick="window._archivoTab('cancion')">üé§ Canciones</div></div>
                    <div class="archivo-grid" id="archivoGrid"><div class="empty-state"><div class="empty-icon">üìÅ</div><div class="empty-title">Cargando archivo...</div></div></div>
                    <div class="archivo-pending-section" id="archivoPendingSection" style="display:none;"><div class="panel-section-title">‚è≥ Solicitudes Pendientes</div><p class="panel-desc" style="margin-bottom:16px;">Estas compras est√°n esperando confirmaci√≥n del administrador</p><div id="archivoPendingList"></div></div>
                </div>

                <!-- üé´ PANEL: PLANES -->
                <div class="panel" id="panel-planes">
                    <div class="panel-header"><h1 class="panel-title">Planes de Suscripci√≥n</h1><p class="panel-desc">Accede a todo el contenido exclusivo de KXON</p></div>
                    <div class="planes-grid" id="planesGrid"><div class="empty-state"><div class="empty-icon">üé´</div><div class="empty-title">Cargando planes...</div></div></div>
                    <div class="solicitudes-section" id="subSolicitudesSection" style="display:none;"><div class="panel-section-title">üìã Solicitudes de Suscripci√≥n</div><div id="subSolicitudesList"></div></div>
                </div>

                <!-- üìä PANEL: HISTORIAL -->
                <div class="panel" id="panel-historial">
                    <div class="panel-header">
                        <h1 class="panel-title">Historial de Reproducciones</h1>
                        <p class="panel-desc">Tu actividad musical reciente</p>
                    </div>
                    <div class="historial-stats">
                        <div class="historial-stat">
                            <div class="historial-stat-value" id="histStatTotal">0</div>
                            <div class="historial-stat-label">Total reproducidas</div>
                        </div>
                        <div class="historial-stat">
                            <div class="historial-stat-value" id="histStatHoy">0</div>
                            <div class="historial-stat-label">Hoy</div>
                        </div>
                        <div class="historial-stat">
                            <div class="historial-stat-value" id="histStatSemana">0</div>
                            <div class="historial-stat-label">Esta semana</div>
                        </div>
                        <div class="historial-stat">
                            <div class="historial-stat-value" id="histStatUnicas">0</div>
                            <div class="historial-stat-label">Canciones √∫nicas</div>
                        </div>
                    </div>
                    <div class="historial-header-actions">
                        <button class="historial-clear-btn" id="btnClearHistorial" onclick="window._clearHistorial()">
                            üóë Borrar historial
                        </button>
                    </div>
                    <div id="historialList">
                        <div class="empty-state">
                            <div class="empty-icon">üìä</div>
                            <div class="empty-title">Cargando historial...</div>
                        </div>
                    </div>
                </div>

                <!-- ‚ù§Ô∏è PANEL: FAVORITOS -->
                <div class="panel" id="panel-favoritos">
                    <div class="panel-header"><h1 class="panel-title">Mis Favoritos</h1><p class="panel-desc">Tu colecci√≥n personal de contenido favorito</p></div>
                    <div class="favs-tabs">
                        <div class="favs-tab active" data-favs-tab="todos" onclick="window._favsTab('todos')">‚ù§Ô∏è Todos</div>
                        <div class="favs-tab" data-favs-tab="cancion" onclick="window._favsTab('cancion')">üéµ Canciones</div>
                        <div class="favs-tab" data-favs-tab="album" onclick="window._favsTab('album')">üíø √Ålbumes</div>
                        <div class="favs-tab" data-favs-tab="beat" onclick="window._favsTab('beat')">üéπ Beats</div>
                        <div class="favs-tab" data-favs-tab="video" onclick="window._favsTab('video')">üé¨ Videos</div>
                    </div>
                    <div class="favs-stat" id="favsStat"></div>
                    <div id="favsContent" class="content-grid content-grid-albums"></div>
                </div>

                <!-- üìä PANEL: ANALYTICS (Admin) -->
                <div class="panel" id="panel-analytics"></div>

                <!-- üë§ PANEL: PERFIL -->
                <div class="panel" id="panel-perfil">
                    <div class="panel-header"><h1 class="panel-title">Mi Perfil</h1><p class="panel-desc">Gestiona tu informaci√≥n personal y configuraci√≥n de cuenta</p></div>
                    <div class="perfil-section"><div class="perfil-section-header"><span class="perfil-section-icon">üë§</span><div><h3 class="perfil-section-title">Informaci√≥n Personal</h3><p class="perfil-section-desc">Tu foto, nombre y biograf√≠a</p></div></div>
                        <div class="perfil-card"><div class="perfil-avatar-section"><div class="perfil-avatar-wrapper"><div class="perfil-avatar" id="perfilAvatar"><img id="perfilAvatarImg" src="" alt="" style="display:none;"><span id="perfilAvatarLetter" class="perfil-avatar-letter">K</span></div><div class="perfil-avatar-overlay" id="perfilAvatarOverlay"><span>üì∑</span><span class="perfil-avatar-overlay-text">Cambiar</span></div><input type="file" id="perfilAvatarFile" accept="image/jpeg,image/png,image/webp" style="display:none;"></div><div class="perfil-avatar-info"><div class="perfil-nombre-display" id="perfilNombreDisplay">Cargando...</div><div class="perfil-role-badge" id="perfilRoleBadge">fan</div><div class="perfil-email-display" id="perfilEmailDisplay">...</div></div></div><div class="perfil-divider"></div>
                            <form class="perfil-form" id="formPerfil"><div class="perfil-form-grid"><div class="form-group"><label class="form-label">Nombre Completo</label><input type="text" class="form-input" id="perfilNombre" placeholder="Tu nombre art√≠stico o real"></div><div class="form-group"><label class="form-label">Email</label><input type="email" class="form-input perfil-input-disabled" id="perfilEmail" disabled><span class="perfil-field-hint">El email no se puede cambiar</span></div></div><div class="form-group"><label class="form-label">Biograf√≠a</label><textarea class="form-textarea" id="perfilBio" placeholder="Cu√©ntanos sobre ti..." rows="4"></textarea><span class="perfil-field-hint perfil-bio-counter"><span id="perfilBioCount">0</span>/500 caracteres</span></div><div class="perfil-form-actions"><button type="submit" class="perfil-btn-save" id="btnGuardarPerfil"><span id="btnGuardarPerfilText">üíæ Guardar Cambios</span></button><span class="perfil-save-status" id="perfilSaveStatus"></span></div></form>
                        </div>
                    </div>
                    <div class="perfil-section"><div class="perfil-section-header"><span class="perfil-section-icon">üîí</span><div><h3 class="perfil-section-title">Seguridad</h3><p class="perfil-section-desc">Cambia tu contrase√±a</p></div></div>
                        <div class="perfil-card"><form class="perfil-form" id="formPassword"><div class="perfil-form-grid"><div class="form-group"><label class="form-label">Nueva Contrase√±a</label><div class="perfil-password-wrapper"><input type="password" class="form-input" id="perfilNewPass" placeholder="M√≠nimo 6 caracteres" minlength="6"><button type="button" class="perfil-pass-toggle" onclick="window._togglePerfilPass('perfilNewPass', this)">üëÅÔ∏è</button></div></div><div class="form-group"><label class="form-label">Confirmar Contrase√±a</label><div class="perfil-password-wrapper"><input type="password" class="form-input" id="perfilConfirmPass" placeholder="Repite la contrase√±a" minlength="6"><button type="button" class="perfil-pass-toggle" onclick="window._togglePerfilPass('perfilConfirmPass', this)">üëÅÔ∏è</button></div></div></div><div class="perfil-form-actions"><button type="submit" class="perfil-btn-save perfil-btn-password" id="btnCambiarPass"><span id="btnCambiarPassText">üîë Cambiar Contrase√±a</span></button></div></form></div>
                    </div>
                    <div class="perfil-section"><div class="perfil-section-header"><span class="perfil-section-icon">‚öôÔ∏è</span><div><h3 class="perfil-section-title">Cuenta</h3><p class="perfil-section-desc">Informaci√≥n de tu cuenta y opciones avanzadas</p></div></div>
                        <div class="perfil-card"><div class="perfil-cuenta-grid"><div class="perfil-cuenta-item"><div class="perfil-cuenta-label">Rol</div><div class="perfil-cuenta-value" id="perfilCuentaRol">fan</div></div><div class="perfil-cuenta-item"><div class="perfil-cuenta-label">Miembro desde</div><div class="perfil-cuenta-value" id="perfilCuentaFecha">...</div></div><div class="perfil-cuenta-item"><div class="perfil-cuenta-label">ID de usuario</div><div class="perfil-cuenta-value perfil-cuenta-id" id="perfilCuentaId">...</div></div><div class="perfil-cuenta-item"><div class="perfil-cuenta-label">Proveedor</div><div class="perfil-cuenta-value" id="perfilCuentaProvider">email</div></div></div><div class="perfil-divider"></div><div class="perfil-danger-zone"><div class="perfil-danger-header"><span class="perfil-danger-icon">‚ö†Ô∏è</span><div><div class="perfil-danger-title">Zona de Peligro</div><div class="perfil-danger-desc">Esta acci√≥n no se puede deshacer</div></div></div><button type="button" class="perfil-btn-delete" id="btnEliminarCuenta">üóëÔ∏è Eliminar mi cuenta</button></div></div>
                    </div>
                </div>

            </div><!-- /content-area -->
        </main>
    </div><!-- /app-layout -->

    <!-- üé∂ PLAYER BAR (Minimizado) -->
    <div class="player-bar" id="playerBar">
        <div class="player-cover" id="playerBarClickZone"><img id="playerCover" src="" alt=""></div>
        <div class="player-info" id="playerInfoClickZone"><div class="player-title" id="playerTitle">‚Äî</div><div class="player-artist">KXON</div></div>
        <div class="player-expand-hint" id="playerExpandHint"><span class="player-expand-arrow">‚ñ≤</span><span>Expandir</span></div>
        <div class="player-controls"><button class="player-btn" id="playerPrev">‚èÆ</button><button class="player-btn play-pause" id="playerPlayPause">‚ñ∂</button><button class="player-btn" id="playerNext">‚è≠</button></div>
        <div class="player-progress"><span class="player-time" id="playerCurrentTime">0:00</span><div class="progress-bar" id="progressBar"><div class="progress-fill" id="progressFill"></div></div><span class="player-time" id="playerDuration">0:00</span></div>
        <div class="player-volume"><span style="font-size:.8rem;cursor:pointer" id="playerVolIcon">üîä</span><div class="volume-bar" id="volumeBar"><div class="volume-fill" id="volumeFill"></div></div></div>
        <div class="player-fav-share">
            <button class="btn-fav" id="playerFavBtn" onclick="window._togglePlayerFav()" title="Favorito"><span>ü§ç</span><span class="fav-burst"></span></button>
            <button class="btn-share" id="playerShareBtn" onclick="window._shareFromPlayer(event)" title="Compartir">‚Üó</button>
        </div>
        <button class="player-close-btn" id="playerCloseBtn" title="Cerrar reproductor">‚úï</button>
    </div>

    <!-- üéµ PLAYER EXPANDIDO -->
    <div class="player-expanded-overlay" id="playerExpanded">
        <div class="player-expanded-bg" id="playerExpBg"></div>
        <div class="player-expanded-bg-overlay"></div>
        <div class="player-exp-swipe"><div class="player-exp-swipe-bar"></div></div>
        <div class="player-exp-header">
            <button class="player-exp-minimize" id="playerExpMinimize" title="Minimizar">‚ñº</button>
            <span class="player-exp-source" id="playerExpSource">REPRODUCIENDO</span>
            <button class="player-exp-menu" id="playerExpMenuBtn" title="Opciones">‚ãØ</button>
        </div>
        <div class="player-exp-content" id="playerExpContent">
            <div class="player-exp-cover-wrapper">
                <div class="player-exp-cover" id="playerExpCoverBox">
                    <img id="playerExpCoverImg" src="" alt="">
                </div>
                <div class="player-exp-vinyl" id="playerExpVinyl">
                    <div class="player-exp-vinyl-label">
                        <div class="player-exp-vinyl-hole"></div>
                        <span class="player-exp-vinyl-label-text">KXON</span>
                    </div>
                </div>
            </div>
            <div class="player-exp-track-info">
                <div class="player-exp-title" id="playerExpTitle">‚Äî</div>
                <div class="player-exp-artist" id="playerExpArtist">KXON</div>
                <div class="player-exp-eq" id="playerExpEq">
                    <div class="player-exp-eq-bar"></div>
                    <div class="player-exp-eq-bar"></div>
                    <div class="player-exp-eq-bar"></div>
                    <div class="player-exp-eq-bar"></div>
                    <div class="player-exp-eq-bar"></div>
                </div>
            </div>
            <div class="player-exp-progress">
                <div class="player-exp-progress-bar" id="playerExpProgressBar">
                    <div class="player-exp-progress-fill" id="playerExpProgressFill">
                        <div class="player-exp-progress-thumb"></div>
                    </div>
                </div>
                <div class="player-exp-times">
                    <span class="player-exp-time" id="playerExpCurrentTime">0:00</span>
                    <span class="player-exp-time" id="playerExpDuration">0:00</span>
                </div>
            </div>
            <div class="player-exp-controls">
                <button class="player-exp-btn player-exp-btn-sm" id="playerExpShuffle" title="Aleatorio">üîÄ</button>
                <button class="player-exp-btn player-exp-btn-md" id="playerExpPrev" title="Anterior">‚èÆ</button>
                <button class="player-exp-btn player-exp-btn-play" id="playerExpPlayPause" title="Play/Pause">‚ñ∂</button>
                <button class="player-exp-btn player-exp-btn-md" id="playerExpNext" title="Siguiente">‚è≠</button>
                <button class="player-exp-btn player-exp-btn-sm" id="playerExpRepeat" title="Repetir">üîÅ</button>
            </div>
            <div class="player-exp-volume">
                <button class="player-exp-vol-icon" id="playerExpVolIcon">üîä</button>
                <div class="player-exp-vol-bar" id="playerExpVolBar">
                    <div class="player-exp-vol-fill" id="playerExpVolFill" style="width:70%"></div>
                </div>
                <span class="player-exp-vol-pct" id="playerExpVolPct">70%</span>
            </div>
            <div class="player-exp-actions">
                <button class="player-exp-action" id="playerExpFav" onclick="window._togglePlayerFav()" title="Favorito">ü§ç</button>
                <button class="player-exp-action" id="playerExpAddPl" onclick="window._addCurrentToPlaylist()" title="Agregar a playlist">‚ûï</button>
                <button class="player-exp-action" id="playerExpShare" onclick="window._shareFromPlayer(event)" title="Compartir">‚ÜóÔ∏è</button>
            </div>
        </div>
    </div>

    <audio id="audioPlayer"></audio>

    <!-- üì¶ SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/dashboard-noticias.js"></script>
    <script src="js/dashboard-init.js"></script>
    <script src="js/dashboard-albumes.js"></script>
    <script src="js/dashboard-radio.js"></script>
    <script src="js/dashboard-marketplace.js"></script>
    <script src="js/dashboard-archivo.js"></script>
    <script src="js/dashboard-videos.js"></script>
    <script src="js/dashboard-perfil.js"></script>
    <script src="js/dashboard-planes.js"></script>
    <script src="js/dashboard-modals.js"></script>
    <script src="js/dashboard-search.js"></script>
    <script src="js/dashboard-notifications.js"></script>
    <script src="js/dashboard-favs-share.js"></script>
    <script src="js/dashboard-analytics.js"></script>
    <script src="js/dashboard-comments.js"></script>
    <script src="js/dashboard-playlists.js"></script>
        <script src="js/dashboard-envivo.js"></script>
    <script src="js/dashboard-player-expanded.js"></script>

    <!-- üì± PWA Service Worker Registration -->
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function () {
            navigator.serviceWorker.register('/sw.js').then(function (reg) {
                console.log('‚úÖ KXON SW registered:', reg.scope);
            }).catch(function (err) {
                console.warn('‚ö†Ô∏è KXON SW failed:', err);
            });
        });
    }
    </script>

    <!-- üîß FIX: Event delegation global -->
    <script>
    (function() {
        document.body.addEventListener('click', function(e) {
            var addTrack = e.target.closest('#btnAddTrack');
            if (addTrack) {
                e.preventDefault();
                e.stopPropagation();
                if (window.KXON && window.KXON.openModal) {
                    window.KXON.openModal('modalCancion');
                }
                return;
            }
            var addEp = e.target.closest('#btnAddEpisodio');
            if (addEp) {
                e.preventDefault();
                e.stopPropagation();
                if (window.KXON && window.KXON.openModal) {
                    window.KXON.openModal('modalEpisodio');
                }
                return;
            }
            var backAlb = e.target.closest('#btnBackAlbums');
            if (backAlb) {
                e.preventDefault();
                e.stopPropagation();
                var listView = document.getElementById('albumesListView');
                var detailView = document.getElementById('albumDetailView');
                if (listView) listView.style.display = 'block';
                if (detailView) detailView.classList.remove('show');
                return;
            }
            var backDoc = e.target.closest('#btnBackDocu');
            if (backDoc) {
                e.preventDefault();
                e.stopPropagation();
                var docList = document.getElementById('docuListView');
                var docDetail = document.getElementById('docuDetailView');
                if (docList) docList.style.display = 'block';
                if (docDetail) docDetail.classList.remove('show');
                return;
            }
        });
    })();
    </script>
</body>
</html>